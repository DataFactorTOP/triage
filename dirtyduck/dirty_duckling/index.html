



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Documentation for Triage.">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.ico">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.2.0">
    
    
      
        <title>Dirty duckling - Triage Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.750b69bd.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.224b79ff.css">
      
      
        
        
        <meta name="theme-color" content="#546e7a">
      
    
    
      <script src="../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,400i,700|Ubuntu+Mono">
        <style>body,input{font-family:"Ubuntu","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Ubuntu Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue-grey" data-md-color-accent="deep-orange">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#dirty-duckling-the-quick-start-guide" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="Triage Documentation" class="md-header-nav__button md-logo">
          
            <i class="md-icon">book</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Triage Documentation
            </span>
            <span class="md-header-nav__topic">
              Dirty duckling
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="http://github.com/dssg/triage/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    dssg/triage
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="Triage Documentation" class="md-nav__button md-logo">
      
        <i class="md-icon">book</i>
      
    </a>
    Triage Documentation
  </label>
  
    <div class="md-nav__source">
      


  

<a href="http://github.com/dssg/triage/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    dssg/triage
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Get started with your own project
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Get started with your own project
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../quickstart/" title="Quickstart guide" class="md-nav__link">
      Quickstart guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../triage_project_workflow/" title="Suggested workflow" class="md-nav__link">
      Suggested workflow
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Dirty Duck Tutorial
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Dirty Duck Tutorial
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="Welcome!" class="md-nav__link">
      Welcome!
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Dirty duckling
      </label>
    
    <a href="./" title="Dirty duckling" class="md-nav__link md-nav__link--active">
      Dirty duckling
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-install-triage-check" title="1. Install Triage: Check!" class="md-nav__link">
    1. Install Triage: Check!
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-structure-your-data-events-and-entities" title="2. Structure your data: Events (and entities)" class="md-nav__link">
    2. Structure your data: Events (and entities)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-set-up-dirty-ducks-triage-configuration-file" title="3. Set up Dirty duck's triage configuration file" class="md-nav__link">
    3. Set up Dirty duck's triage configuration file
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-run-triage" title="4. Run triage" class="md-nav__link">
    4. Run triage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-look-at-results-of-your-duckling" title="5. Look at results of your duckling!" class="md-nav__link">
    5. Look at results of your duckling!
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-whats-next" title="6. What's next?" class="md-nav__link">
    6. What's next?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#take-a-deeper-look-at-triage-through-this-example" title="Take a deeper look at triage through this example" class="md-nav__link">
    Take a deeper look at triage through this example
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get-started-with-your-own-project-and-data" title="Get started with your own project and data" class="md-nav__link">
    Get started with your own project and data
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-3" type="checkbox" id="nav-3-3">
    
    <label class="md-nav__link" for="nav-3-3">
      Case studies
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-3">
        Case studies
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../problem_description/" title="Problem description" class="md-nav__link">
      Problem description
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eis/" title="Early Warning System" class="md-nav__link">
      Early Warning System
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../inspections/" title="Resource prioritization" class="md-nav__link">
      Resource prioritization
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-4" type="checkbox" id="nav-3-4">
    
    <label class="md-nav__link" for="nav-3-4">
      Triage
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-4">
        Triage
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../triage_intro/" title="A deeper look into triage" class="md-nav__link">
      A deeper look into triage
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-5" type="checkbox" id="nav-3-5">
    
    <label class="md-nav__link" for="nav-3-5">
      Are you curious about the setup?
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-5">
        Are you curious about the setup?
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../infrastructure/" title="Infrastructure" class="md-nav__link">
      Infrastructure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../data_preparation/" title="Data preparation" class="md-nav__link">
      Data preparation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../for_the_impatient/" title="Quick setup" class="md-nav__link">
      Quick setup
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Triage documentation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Triage documentation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-1" type="checkbox" id="nav-4-1">
    
    <label class="md-nav__link" for="nav-4-1">
      Experiment
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-1">
        Experiment
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../experiments/experiment-config/" title="Experiment Configuration" class="md-nav__link">
      Experiment Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../experiments/feature-testing/" title="Testing Feature Configuration" class="md-nav__link">
      Testing Feature Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../experiments/running/" title="Running an Experiment" class="md-nav__link">
      Running an Experiment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-1-4" type="checkbox" id="nav-4-1-4">
    
    <label class="md-nav__link" for="nav-4-1-4">
      Upgrading an Experiment
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-1-4">
        Upgrading an Experiment
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../experiments/upgrade-to-v7/" title="v6 -> v7" class="md-nav__link">
      v6 -> v7
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../experiments/upgrade-to-v6/" title="v5 -> v6" class="md-nav__link">
      v5 -> v6
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../experiments/upgrade-to-v5/" title="v3/v4 -> v5" class="md-nav__link">
      v3/v4 -> v5
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../experiments/temporal-validation/" title="Temporal Validation Deep Dive" class="md-nav__link">
      Temporal Validation Deep Dive
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../experiments/cohort-labels/" title="Cohort and Label Deep Dive" class="md-nav__link">
      Cohort and Label Deep Dive
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../experiments/prediction-ranking/" title="Prediction Ranking" class="md-nav__link">
      Prediction Ranking
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../experiments/features/" title="Feature Generation Recipe Book" class="md-nav__link">
      Feature Generation Recipe Book
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../experiments/algorithm/" title="Experiment Algorithm" class="md-nav__link">
      Experiment Algorithm
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../experiments/architecture/" title="Experiment Architecture" class="md-nav__link">
      Experiment Architecture
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-2" type="checkbox" id="nav-4-2">
    
    <label class="md-nav__link" for="nav-4-2">
      Model selection
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-2">
        Model selection
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../audition/audition/" title="Using Audition" class="md-nav__link">
      Using Audition
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../audition/audition-config/" title="Audition Configuration" class="md-nav__link">
      Audition Configuration
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3" type="checkbox" id="nav-4-3">
    
    <label class="md-nav__link" for="nav-4-3">
      Postmodeling
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-3">
        Postmodeling
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../postmodeling/" title="Using Postmodeling" class="md-nav__link">
      Using Postmodeling
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../postmodeling/postmodeling-config/" title="Postmodeling & Crosstabs Configuration" class="md-nav__link">
      Postmodeling & Crosstabs Configuration
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ml_governance/" title="Model governance" class="md-nav__link">
      Model governance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../aws_batch/" title="Scaling up" class="md-nav__link">
      Scaling up
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-install-triage-check" title="1. Install Triage: Check!" class="md-nav__link">
    1. Install Triage: Check!
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-structure-your-data-events-and-entities" title="2. Structure your data: Events (and entities)" class="md-nav__link">
    2. Structure your data: Events (and entities)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-set-up-dirty-ducks-triage-configuration-file" title="3. Set up Dirty duck's triage configuration file" class="md-nav__link">
    3. Set up Dirty duck's triage configuration file
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-run-triage" title="4. Run triage" class="md-nav__link">
    4. Run triage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-look-at-results-of-your-duckling" title="5. Look at results of your duckling!" class="md-nav__link">
    5. Look at results of your duckling!
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-whats-next" title="6. What's next?" class="md-nav__link">
    6. What's next?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#take-a-deeper-look-at-triage-through-this-example" title="Take a deeper look at triage through this example" class="md-nav__link">
    Take a deeper look at triage through this example
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get-started-with-your-own-project-and-data" title="Get started with your own project and data" class="md-nav__link">
    Get started with your own project and data
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="http://github.com/dssg/triage/edit/master/docs/sources/dirtyduck/dirty_duckling.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="dirty-duckling-the-quick-start-guide">Dirty duckling: the quick start guide<a class="headerlink" href="#dirty-duckling-the-quick-start-guide" title="Permanent link">#</a></h1>
<p><img alt="workflow" src="../images/quickstart.png" title="Triage Workflow" /></p>
<p>This <em>quickstart</em> guide follows the workflow explained
<a href="../../quickstart/">here</a>. The goal is to show you an instance of that
workflow using the <a href="https://data.cityofchicago.org/Health-Human-Services/Food-Inspections/4ijn-s7e5">Chicago Food Inspections
dataset</a>
data source.</p>
<p>We packed this a sample of Chicago Food Inspections data source as
part of the dirty duck tutorial.  Just run in the folder that contains
the <code>triage</code> local repository:</p>
<div class="codehilite"><pre><span></span><code>./tutorial.sh up
</code></pre></div>


<p>from you command line. This will start the database.</p>
<h3 id="1-install-triage-check">1. Install Triage: Check!<a class="headerlink" href="#1-install-triage-check" title="Permanent link">#</a></h3>
<p>We also containerized <code>triage</code>, so, in this tutorial it is already
installed for you! Just run</p>
<div class="codehilite"><pre><span></span><code>./tutorial.sh bastion
</code></pre></div>


<p>The prompt in your command line should change to something like</p>
<div class="codehilite"><pre><span></span><code>[dirtyduck@bastion$:/triage]
</code></pre></div>


<p>Type <code>triage</code>, if no error. You completed this step!</p>
<p>Now you have <code>triage</code> installed, with all its power at the point of
your fingers.</p>
<h3 id="2-structure-your-data-events-and-entities">2. Structure your data: Events (and entities)<a class="headerlink" href="#2-structure-your-data-events-and-entities" title="Permanent link">#</a></h3>
<p>As mentioned in the <a href="../../quickstart/#2-structure-your-data">quickstart
workflow</a>, <em>at least</em> you need
one table that contains <em>events</em>, i.e. something that happened to your
entities of interest somewhere at sometime. So you need <em>at least</em>
three columns in your data: <code>entity_id</code>, <code>event_id</code>, <code>date</code> (and
<code>location</code> if you have it would be a nice addition).</p>
<p>In dirtyduck, we provide you with two tables: <code>semantic.entities</code> and
<code>semantic.events</code>. The latter is the required minimum. We added the
<code>semantic.entities</code> table as a good practice.</p>
<p>This is the  simplest way to structure your data: as a series of
events connected to your entity of interest (people, organization,
business, etc.) that take place at a certain time. Each row of the
data will be an event.</p>
<p>For this quickstart tutorial, you don't need to interact manually with
the database, but, if you are curious you can peek inside it, and
verify how the <code>events</code> table look like.</p>
<p>Inside <code>bastion</code> you can connect to the database typing</p>
<div class="codehilite"><pre><span></span><code>psql $DATABASE_URL
</code></pre></div>


<p>This will change the prompt one more time to</p>
<div class="codehilite"><pre><span></span><code>food=#
</code></pre></div>


<p>Now, type (or copy-paste) the following</p>
<div class="highlight"><pre><span></span><span class="k">select</span>
  <span class="n">event_id</span>
  <span class="n">entity_id</span><span class="p">,</span>
  <span class="nb">date</span><span class="p">,</span>
  <span class="n">zip_code</span><span class="p">,</span>
  <span class="k">type</span>
  <span class="k">from</span>
      <span class="n">semantic</span><span class="p">.</span><span class="n">events</span>
 <span class="k">where</span> <span class="n">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">.</span><span class="mi">001</span>
 <span class="k">limit</span> <span class="mi">5</span><span class="p">;</span>
</pre></div>

<table>
<thead>
<tr>
<th>entity_id</th>
<th>date</th>
<th>zip_code</th>
<th>type</th>
</tr>
</thead>
<tbody>
<tr>
<td>1092838</td>
<td>2014-02-27</td>
<td>60657</td>
<td>license</td>
</tr>
<tr>
<td>1325036</td>
<td>2014-05-19</td>
<td>60612</td>
<td>canvass</td>
</tr>
<tr>
<td>1385431</td>
<td>2014-06-25</td>
<td>60651</td>
<td>complaint</td>
</tr>
<tr>
<td>1395315</td>
<td>2014-01-08</td>
<td>60707</td>
<td>canvass</td>
</tr>
<tr>
<td>1395916</td>
<td>2014-02-03</td>
<td>60641</td>
<td>canvass</td>
</tr>
</tbody>
</table>
<p>Each row in this table is an event with <code>event_id</code> and
<code>entity_id</code> (which links to the entity it happened to), a <code>date</code>
(when it happened), as well a location (the <code>zip_code</code> column). The
event will have attributes that describe it in its particularity, in
this case we are just showing one of those attributes: the type of the
inspection (<code>type</code>)</p>
<p>And, if you also want to see the <em>entities</em> in your data</p>
<div class="highlight"><pre><span></span><span class="k">select</span>
  <span class="n">entity_id</span><span class="p">,</span> <span class="n">license_num</span><span class="p">,</span> <span class="n">facility</span><span class="p">,</span> <span class="n">facility_type</span><span class="p">,</span> <span class="n">activity_period</span>
  <span class="k">from</span>
      <span class="n">semantic</span><span class="p">.</span><span class="n">entities</span>
 <span class="k">where</span> <span class="n">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">.</span><span class="mi">001</span> <span class="k">limit</span> <span class="mi">5</span><span class="p">;</span>
</pre></div>

<table>
<thead>
<tr>
<th>entity_id</th>
<th>license_num</th>
<th>facility</th>
<th>facility_type</th>
<th>activity_period</th>
</tr>
</thead>
<tbody>
<tr>
<td>2218</td>
<td>1223576</td>
<td>loretto hospital</td>
<td>hospital</td>
<td>[2014-02-27,)</td>
</tr>
<tr>
<td>2353</td>
<td>1804587</td>
<td>subway</td>
<td>restaurant</td>
<td>[2014-03-05,)</td>
</tr>
<tr>
<td>636</td>
<td>2002788</td>
<td>duck walk</td>
<td>restaurant</td>
<td>[2014-01-17,2016-02-29)</td>
</tr>
<tr>
<td>3748</td>
<td>1904141</td>
<td>zaragoza restaurant</td>
<td>restaurant</td>
<td>[2014-04-03,)</td>
</tr>
<tr>
<td>5118</td>
<td>2224978</td>
<td>saint cajetan</td>
<td>school</td>
<td>[2014-05-06,)</td>
</tr>
</tbody>
</table>
<p>Triage needs a field named <code>entity_id</code> (that needs to be of type
integer) to refer to the primary <em>entities</em> of interest in our
project.</p>
<p>When you're done exploring the database, you can exit the postgres command line interface by typing <code>\q</code></p>
<h3 id="3-set-up-dirty-ducks-triage-configuration-file">3. Set up Dirty duck's triage configuration file<a class="headerlink" href="#3-set-up-dirty-ducks-triage-configuration-file" title="Permanent link">#</a></h3>
<p>The configuration file sets up the modeling process to mirror the
operational scenario the models will be used in. This involves
defining the cohort to train/predict on, the outcome we're predicting,
how far in the future we're predicting, how often will the model be updated,
how often will the predicted list be used for interventions, what are
the resources available to intervene to define the evaluation metric,  etc.</p>
<p>Here's the <a href="https://github.com/dssg/triage/blob/master/example/dirtyduck/experiments/dirty-duckling.yaml">sample configuration
file</a> called <code>dirty-duckling.yaml</code></p>
<div class="highlight"><pre><span></span><span class="nt">config_version</span><span class="p">:</span> <span class="s">&#39;v7&#39;</span>

<span class="nt">model_comment</span><span class="p">:</span> <span class="s">&#39;dirtyduck-quickstart&#39;</span>

<span class="nt">temporal_config</span><span class="p">:</span>
    <span class="nt">label_timespans</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="s">&#39;3months&#39;</span><span class="p p-Indicator">]</span>

<span class="nt">label_config</span><span class="p">:</span>
  <span class="nt">query</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no">select</span>
    <span class="no">entity_id,</span>
    <span class="no">bool_or(result = &#39;fail&#39;)::integer as outcome</span>
    <span class="no">from semantic.events</span>
    <span class="no">where &#39;{as_of_date}&#39;::timestamp &lt;= date</span>
    <span class="no">and date &lt; &#39;{as_of_date}&#39;::timestamp + interval &#39;{label_timespan}&#39;</span>
    <span class="no">group by entity_id</span>
  <span class="nt">name</span><span class="p">:</span> <span class="s">&#39;failed_inspections&#39;</span>

<span class="nt">feature_aggregations</span><span class="p">:</span>
  <span class="p p-Indicator">-</span>
    <span class="nt">prefix</span><span class="p">:</span> <span class="s">&#39;inspections&#39;</span>
    <span class="nt">from_obj</span><span class="p">:</span> <span class="s">&#39;semantic.events&#39;</span>
    <span class="nt">knowledge_date_column</span><span class="p">:</span> <span class="s">&#39;date&#39;</span>

    <span class="nt">aggregates_imputation</span><span class="p">:</span>
      <span class="nt">count</span><span class="p">:</span>
        <span class="nt">type</span><span class="p">:</span> <span class="s">&#39;zero_noflag&#39;</span>

    <span class="nt">aggregates</span><span class="p">:</span>
      <span class="p p-Indicator">-</span>
        <span class="nt">quantity</span><span class="p">:</span>
          <span class="nt">total</span><span class="p">:</span> <span class="s">&quot;*&quot;</span>
        <span class="nt">metrics</span><span class="p">:</span>
          <span class="p p-Indicator">-</span> <span class="s">&#39;count&#39;</span>

    <span class="nt">intervals</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="s">&#39;all&#39;</span><span class="p p-Indicator">]</span>

    <span class="nt">groups</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="s">&#39;entity_id&#39;</span>

<span class="nt">model_grid_preset</span><span class="p">:</span>  <span class="s">&#39;quickstart&#39;</span>

<span class="nt">scoring</span><span class="p">:</span>
    <span class="nt">testing_metric_groups</span><span class="p">:</span>
        <span class="p p-Indicator">-</span>
          <span class="nt">metrics</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">precision@</span><span class="p p-Indicator">]</span>
          <span class="nt">thresholds</span><span class="p">:</span>
            <span class="nt">percentiles</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">10</span><span class="p p-Indicator">]</span>


    <span class="nt">training_metric_groups</span><span class="p">:</span>
      <span class="p p-Indicator">-</span>
          <span class="nt">metrics</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">precision@</span><span class="p p-Indicator">]</span>
          <span class="nt">thresholds</span><span class="p">:</span>
            <span class="nt">percentiles</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">10</span><span class="p p-Indicator">]</span>
</pre></div>

<p>This is the <em>minimum</em> configuration file, and it still has a lot of
sections (ML is a complex business!).</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you use the minimum configuration file several parameters will fill
up using defaults. Most of the time those defaults are not the values
that your modeling of the problem needs! Please check
<a href="https://github.com/dssg/triage/blob/master/example/config/experiment.yaml">here</a>
to see which values are being used and act accordingly.</p>
</div>
<p><code>triage</code> uses/needs a <em>data connection</em> in order to work. The
connection will be created using the database credentials information
(name of the database, server, username, and password).</p>
<p>You could use a database configuration file <a href="https://github.com/dssg/triage/blob/master/example/config/database.yaml">here's an example
database configuation file</a> or you can setup an
environment variable named <code>$DATABASE_URL</code>, this is the approach taken
in the dirtyduck tutorial, its value inside <code>bastion</code> is</p>
<div class="codehilite"><pre><span></span><code>   postgresql://food_user:some_password@food_db/food
</code></pre></div>


<p>For the quick explanation of the sections check the <a href="../../quickstart/#3-set-up-triage-configuration-files">quickstart
workflow guide</a>. For a
detailed explanation about each section of the configuration file look
<a href="https://github.com/dssg/triage/blob/master/example/config/experiment.yaml">here</a></p>
<h3 id="4-run-triage">4. Run triage<a class="headerlink" href="#4-run-triage" title="Permanent link">#</a></h3>
<p>Now we are ready for run something! First we will validate the
configuration files by running:</p>
<div class="highlight"><pre><span></span>triage experiment experiments/dirty-duckling.yaml --validate-only
</pre></div>

<p>If everything was OK (it should!), you can run the experiment with:</p>
<p><div class="highlight"><pre><span></span>triage experiment experiments/dirty-duckling.yaml
</pre></div>
That's it! If you see this message in your screen:</p>
<div class="codehilite"><pre><span></span><code> INFO:root:Experiment complete
    INFO:root:All models that were supposed to be trained were trained. Awesome!
    INFO:root:All matrices that were supposed to be build were built. Awesome!
</code></pre></div>


<p>it would mean that <code>triage</code> actually built (in this order) cohort
(table <code>cohort_all_entities...</code>),
labels (table <code>labels_failed_inspections...</code>), features (schema
<code>features</code>), matrices (table <code>model_metdata.matrices</code> and folder
<code>matrices</code>), models (tables <code>model_metadata.models</code> and
<code>model_metadata.model_groups</code>; folder <code>trained_models</code>), predictions
(table <code>test_results.predictions</code>)
and evaluations (table <code>test_results.evaluations</code>).</p>
<h3 id="5-look-at-results-of-your-duckling">5. Look at results of your duckling!<a class="headerlink" href="#5-look-at-results-of-your-duckling" title="Permanent link">#</a></h3>
<p>Next, let's quickly check the tables in the schemas <code>model_metadata</code> and
<code>test_results</code> to make sure everything worked. There you will find a lot 
of information related to the performance of your models.</p>
<p>Still connected to the <code>bastion</code> docker container, you can connect to the
database by typing:</p>
<div class="codehilite"><pre><span></span><code>psql $DATABASE_URL
</code></pre></div>


<p>Again, you should see the postgreSQL prompt:</p>
<div class="codehilite"><pre><span></span><code>food=#
</code></pre></div>


<p>Tables in the <code>model_metadata</code> schema have some general information about
experiments that you've run and the models they created. The <code>quickstart</code>
model grid preset should have built 3 models. Let's check with:</p>
<div class="highlight"><pre><span></span><span class="k">select</span> 
  <span class="n">model_id</span><span class="p">,</span> <span class="n">model_group_id</span><span class="p">,</span> <span class="n">model_type</span> 
  <span class="k">from</span> 
      <span class="n">model_metadata</span><span class="p">.</span><span class="n">models</span><span class="p">;</span>
</pre></div>

<p>This should give you a result that looks something like:</p>
<table>
<thead>
<tr>
<th>model_id</th>
<th>model_group_id</th>
<th>model_type</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>1</td>
<td>triage.component.catwalk.estimators.classifiers.ScaledLogisticRegression</td>
</tr>
<tr>
<td>2</td>
<td>2</td>
<td>sklearn.tree.DecisionTreeClassifier</td>
</tr>
<tr>
<td>3</td>
<td>3</td>
<td>sklearn.dummy.DummyClassifier</td>
</tr>
</tbody>
</table>
<p>If you want to see predictions for individual entities, you can check out
<code>test_results.predictions</code>, for instance:</p>
<div class="highlight"><pre><span></span><span class="k">select</span> 
  <span class="n">model_id</span><span class="p">,</span> <span class="n">entity_id</span><span class="p">,</span> <span class="n">as_of_date</span><span class="p">,</span> <span class="n">score</span><span class="p">,</span> <span class="n">label_value</span>
  <span class="k">from</span>
      <span class="n">test_results</span><span class="p">.</span><span class="n">predictions</span>
  <span class="k">where</span> <span class="n">entity_id</span> <span class="o">=</span> <span class="mi">15596</span>
  <span class="k">order</span> <span class="k">by</span> <span class="n">model_id</span><span class="p">;</span>
</pre></div>

<p>This will give you something like:</p>
<table>
<thead>
<tr>
<th>model_id</th>
<th>entity_id</th>
<th>as_of_date</th>
<th>score</th>
<th>label_value</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>15596</td>
<td>2017-09-29 00:00:00</td>
<td>0.21884</td>
<td>0</td>
</tr>
<tr>
<td>2</td>
<td>15596</td>
<td>2017-09-29 00:00:00</td>
<td>0.22831</td>
<td>0</td>
</tr>
<tr>
<td>3</td>
<td>15596</td>
<td>2017-09-29 00:00:00</td>
<td>0.25195</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>Finally, <code>test_results.evaluations</code> holds some aggregate information on model
performance. In our config above, we only focused on precision in the top
ten percent, so let's see how the models are doing based on this:</p>
<div class="highlight"><pre><span></span><span class="k">select</span> 
  <span class="n">model_id</span><span class="p">,</span> <span class="n">metric</span><span class="p">,</span> <span class="k">parameter</span><span class="p">,</span> <span class="n">stochastic_value</span>
  <span class="k">from</span>
      <span class="n">test_results</span><span class="p">.</span><span class="n">evaluations</span>
  <span class="k">where</span> <span class="n">metric</span> <span class="o">=</span> <span class="s1">&#39;precision@&#39;</span> 
        <span class="k">and</span> <span class="k">parameter</span><span class="o">=</span><span class="s1">&#39;10_pct&#39;</span>
  <span class="k">order</span> <span class="k">by</span> <span class="n">model_id</span><span class="p">;</span>
</pre></div>

<table>
<thead>
<tr>
<th>model_id</th>
<th>metric</th>
<th>parameter</th>
<th>stochastic_value</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>precision@</td>
<td>10_pct</td>
<td>0.2865853658536585</td>
</tr>
<tr>
<td>2</td>
<td>precision@</td>
<td>10_pct</td>
<td>0.0</td>
</tr>
<tr>
<td>3</td>
<td>precision@</td>
<td>10_pct</td>
<td>0.0</td>
</tr>
</tbody>
</table>
<p>Not great! But then again, these were just a couple of overly simple model
specifications to get things up and running...</p>
<p>Feel free to explore some of the other tables in these schemas (note that
there's also a <code>train_results</code> schema with performance on the training
set as well as feature importances, where defined). When you're done 
exploring the database, you can exit the postgres command line interface 
by typing <code>\q</code></p>
<p>With a real modeling run you could (<em>should</em>) do model selection, postmodeling, 
bias audit, etc. <code>triage</code> provides tools for doing all of that, but we 
the purpose of this little experiment was just to get things up and running. 
If you have successfully arrived to this point, you are all set to do your own 
modeling (<a href="../../quickstart/">here's a good place to start</a>), but if you want to 
go deeper in this example and learn about these other <code>triage</code> functions,
<a href="../problem_description/">continue reading our in-depth tutorial</a>.</p>
<h3 id="6-whats-next">6. What's next?<a class="headerlink" href="#6-whats-next" title="Permanent link">#</a></h3>
<h3 id="take-a-deeper-look-at-triage-through-this-example"><a href="../problem_description/">Take a deeper look at triage through this example</a><a class="headerlink" href="#take-a-deeper-look-at-triage-through-this-example" title="Permanent link">#</a></h3>
<h3 id="get-started-with-your-own-project-and-data"><a href="../../quickstart/">Get started with your own project and data</a><a class="headerlink" href="#get-started-with-your-own-project-and-data" title="Permanent link">#</a></h3>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../" title="Welcome!" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Welcome!
              </span>
            </div>
          </a>
        
        
          <a href="../problem_description/" title="Problem description" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Problem description
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/dssg/triage" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://twitter.com/datascifellows" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://linkedin.com/company/center-for-data-science-and-public-policy-university-of-chicago" class="md-footer-social__link fa fa-linkedin"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.39abc4af.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
        <script src="../../js/mermaid.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>